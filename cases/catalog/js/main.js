var mycase=[
    {tit:"风氢扬官网",href:"https://g-powertech.com.cn/",date:20210101,star:5,type:'PC'},
    {tit:"打响防疫知识战",href:"./2020/58/ncpqa",date:20200321,star:3},
    {tit:"答案星球",href:"./2019/jdbook/answerplanet",date:20190419,star:5},
    {tit:"2019汽车产业会议",href:"./2019/autohome/meeting_v1",date:20190724,star:4},
    // {tit:"2019汽车产业会议2-汽车之家",href:"./2019/autohome/meeting_v2",date:20190724,star:2},
    {tit:"突破次元壁，找到二次元中的你",href:"./2018/aliwenxue/acg",date:20180809,star:3,shref:"https://aliwenxue.maimang.net.cn/731/"},
    {tit:"海信世界杯球迷广场",href:"./2018/hisense/worldcup",date:20180612,star:5},
    {tit:"寻人启事 重返汶川",href:"./2018/aliwenxue/512",date:20180512,star:5,shref:"https://aliwenxue.maimang.net.cn/512/",},
    {tit:"这是一条充满爱的朋友圈",href:"./2018/aliwenxue/moments/",date:20180410,star:5,shref:"https://aliwenxue.maimang.net.cn/",w:640},
    {tit:"马自达3",href:"./2018/mazda/panorama/",date:20180212,star:4},
    {tit:"故宫：寻找遗失的穿越密码",href:"./2017/iqiyi/palace/",date:20170823,star:5,w:640},
    {tit:"HIGH购家装季",href:"./2017/gome/526/",date:20170526,star:4,shref:"http://2017.gome.com.cn/526/h5/",w:640},
    {tit:"五一家电低价直通车",href:"./2017/gome/bus/",date:20170501,star:5,shref:"http://2017.gome.com.cn/51h/",w:640},
    {tit:"抢先尝夏，这里给你360度的选择",href:"./2017/gome/aircondition/",date:20170324,star:5,shref:"http://2017.gome.com.cn/ktj/"},
    {tit:"408 超级福利计划",href:"./2017/gome/408/",date:20170408,star:3,w:640},
    {tit:"3.10黑色星期伍",href:"./2017/gome/163/",date:20170310,star:4,w:640},
    {tit:"来~画了这个包，拿着去买包",href:"./2017/gome/draw/",date:20170123,star:3,w:640},
    {tit:"30周年福利大放送",href:"./2016/gome/30years/",date:20161223,star:3,w:640},
    {tit:"11.11来了，现金红包也来了！",href:"./2016/gome/1111/",date:20161111,star:3,w:640},
    {tit:"爷爷，你是不是心甘情愿跟了蛇精？",href:"./2016/gome/gourdbaby/",date:20160902,star:4,w:640},
    {tit:"快！趣现场",href:"./2016/hisense/didi2/",date:20160706,star:5},
    {tit:"快去现场",href:"./2016/hisense/didi/",date:20160619,star:5,w:640},
    {tit:"欧洲杯看我的 猜比分看你的",href:"2016/hisense/eurocup/",date:20160612,star:4,w:640},
    {tit:"小米情景营销分享会",href:"./2016/mediav/xiaomishare/",date:20160429,star:3,w:640},
    {tit:"豪门盛宴 看我主场",href:"./2016/hisense/415/",date:20160419,star:4,w:640},
    {tit:"315，你不知道的那些事儿",href:"./2016/gome/315/",date:20160301,star:5,w:640},
    {tit:"这是一场时光的SHOW",href:"./2016/mediav/nianhui/",date:20160122,shref:"http://2016chunjie.mediav.cn/",star:2,w:640},
    {tit:"摇出萌造型欢乐拜大年",href:"./2016/gome/springfestival/",date:20160202,shref:"?userid=404",star:5,w:640},
    {tit:"新年 选一份全家共享的礼物",href:"./2015/hisense/yuanchun/wap/",date:20160112,star:1,w:640},
    {tit:"好基友的日常(6)",href:"./2015/gome/gayfriend/",date:20151231,star:5,w:640},
    {tit:"12.12海信超级品牌日",href:"./2015/hisense/1212/",date:20151212,star:1,w:640},
    {tit:"海尔商城30+梦想趴 生活+大联盟",href:"./2015/haier/island/",date:20151211,star:4,w:640},
    {tit:"11.11前夜发生了什么",href:"./2015/gome/1111eve/",date:20151110,star:5,w:640},
    {tit:"疯狂摇充电！免费乐1S到手！快帮我充电！",href:"./2015/letv/charge/",date:20151028,shref:"?userid=404",star:4,w:640},
    {tit:"勿忘初心 与你同行",href:"./2015/gome/party/",date:20151014,star:3,w:640},
    {tit:"十一家电购买指南，放心购",href:"./2015/gome/storm/",date:20150930,star:4,w:640},
    {tit:"iPhone 6s发售前，Siri有话要说！",href:"./2015/gome/siri/",date:20150925,star:5,w:640},
    {tit:"防走失手表",href:"./2015/gome/watch/",date:20150902,star:5,w:640},
    {tit:"你的脸值多少钱？",href:"./2015/gome/face/",date:20150805,star:4,w:640},
    {tit:"“谜样凶手”密室事件",href:"./2015/leader/detective/",date:20150727,star:2,w:640},
    {tit:"717起来嗨",href:"./2015/gome/717high/",date:20150717,star:5,w:640},
    {tit:"趁年轻请热血",href:"./2015/gome/cartoon/",date:20150706,star:4,w:640},
    {tit:"“爸”道星座",href:"./2015/leader/dadsign/",date:20150617,star:2,w:640},
    {tit:"奔跑吧海信",href:"./2015/hisense/runner/",date:20150423,star:1,w:640},
    {tit:"海信ULED曲面电视",href:"./2015/hisense/curveduled/",date:20150415,star:3,w:640},
    {tit:"用心去旅行",href:"./2015/leader/travel/",date:20150409,star:4,w:640},
    {tit:"「带你吃霸王餐」绝不是一个愚人节的玩笑！",href:"./2015/gome/aprilfool/",date:20150401,star:2,w:640},
    {tit:"我的愿望我做主！中国银行个人网络循环贷款",href:"./2015/boc/pbservice/",date:20150323,star:2,w:640},
    {tit:"海信uled领年画抢红包",href:"./2015/hisense/chunjie/",date:20150217,shref:"?userid=404",star:3,w:640},
    {tit:"你的心，跟你一起回家了吗？",href:"./2015/gome/gohome/",date:20150217,star:4,w:640},
    {tit:"国美 会说话的盒子",href:"./2015/gome/box/",date:20150210,star:4,w:640},
    {tit:"戳戳笑点欢乐拜年",href:"./2015/leader/chunlian/",date:20150123,shref:"?userid=404",star:4,w:640},
    {tit:"2015明信片显露真性情",href:"./2015/leader/postcard/",date:20150104,shref:"?uid=404",star:2,w:640},
    {tit:"Pandora占星小巫揭秘2015星座运势！",href:"./2014/gome/xingzuo/",date:20141229,star:1,w:640},
    {tit:"12.12 十万红信封温暖传递",href:"./2014/hisense/1212mail/",date:20141212,star:3,w:640}
  ]
  var Len = mycase.length;
  mycase.forEach((el, index) => {
    el.uid = Len - index
  })
  console.log(mycase)
  var ua= navigator.userAgent;
  var customers={other:"其他",hisense:"海信",gome:"国美",boc:"中国银行",leader:"统帅电器",letv:"乐视",haier:"海尔",mediav:"聚胜万合",iqiyi:"爱奇艺",mazda:"马自达",aliwenxue:"阿里文学",jdbook:"京东图书",autohome:"汽车之家",58:"58同城"}
  var search=window.location.search;
  var isIOSwx = !!ua.match(/\(i[^;]+;( U;)? CPU.+Mac OS X.+MicroMessenger/)
  if(search.indexOf('major')!=-1){
    mycase.sort(function(a,b){
      return b.star-a.star?(b.star-a.star):(b.date-a.date);
    })
  }
  if(search.indexOf('star')!=-1){
    var threshold=3;
    if(getQueryString('star')) threshold=Number(getQueryString('star'));

    var i=mycase.length-1;
    while(i>=0){
      if(mycase[i].star<threshold) mycase.splice(i,1);
      --i;
    }
  }
  document.addEventListener("DOMContentLoaded",function init(){
    for(var i=0;i<mycase.length;i++){
      var a=document.createElement('a');
      //a.innerText=mycase[i].tit;
      var _href=mycase[i].href;
      var _type=mycase[i].type
      _customer=_href.match(/\d{4}\/([^\/]+)/);
      _customer=_customer?_customer[1]:'other';
      a.innerHTML=mycase[i].tit + "<span>" + customers[_customer] +" " + (_type?_type:"H5") + "</span>";
      
      _href=_href.indexOf("http")==-1?("../"+_href):_href;
      if (isIOSwx){
        (function(h){
          a.addEventListener('click',function(e){
            e.preventDefault();
            location.replace(h);
          })
        })(_href)
      }else{
        a.setAttribute('href',_href);
      }
      
      a.setAttribute('data-date',mycase[i].date);
      a.setAttribute('data-star',mycase[i].star);
      a.setAttribute('id', 'c' + mycase[i].uid)
      if(mycase[i].type){
        a.setAttribute('data-type', mycase[i].type)
      }
      if(mycase[i].w){
        a.setAttribute('data-width', mycase[i].w)
      }
      if(mycase[i].shref){
        a.setAttribute('data-href',mycase[i].shref);
      }
      document.body.appendChild(a);
    }
  })
  function getQueryString(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return unescape(r[2]); return null;
  };