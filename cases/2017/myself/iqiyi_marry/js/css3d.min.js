/*!
 * VERSION: 0.8.2
 * DATE: 2016-09-13
 * GIT:https://github.com/shrekshrek/css3d-engine
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/
(function(b){var a=(typeof self=="object"&&self.self==self&&self)||(typeof global=="object"&&global.global==global&&global);if(typeof define==="function"&&define.amd){define(["exports"],function(c){a.C3D=b(a,c)})}else{if(typeof exports!=="undefined"){b(a,exports)}else{a.C3D=b(a,{})}}}(function(e,f){var h=function(m){var l=[];for(var k in m){l.push(k)}return l};var d=function(r){var p=arguments.length;if(p<2||r==null){return r}for(var m=1;m<p;m++){var q=arguments[m],s=h(q),k=s.length;for(var o=0;o<k;o++){var n=s[o];r[n]=q[n]}}return r};var a=function(k,m){var l=this;var o;if(k&&Object.prototype.hasOwnProperty.call(k,"constructor")){o=k.constructor}else{o=function(){return l.apply(this,arguments)}}d(o,l,m);var n=function(){this.constructor=o};n.prototype=l.prototype;o.prototype=new n;if(k){d(o.prototype,k)}o.__super__=l.prototype;return o};var c="";(function(){var k=document.createElement("div");var m=["Webkit","Moz","Ms","O"];for(var l in m){if((m[l]+"Transform") in k.style){c=m[l];break}}}());f.getRandomColor=function(){return"#"+("00000"+(Math.random()*16777216<<0).toString(16)).slice(-6)};f.rgb2hex=function(m,l,k){return((m<<16)|(l<<8)|k).toString(16)};f.hex2rgb=function(m){var k=Math.floor("0x"+m);var o=k>>16&255;var n=k>>8&255;var l=k&255;return[o,n,l]};function i(k){return Math.round(k)}function g(k){return Math.round(k*100)/100}function b(k){return k.replace(/\b(\w)|\s(\w)/g,function(l){return l.toUpperCase()})}f.Object=function(){this.initialize.apply(this,arguments)};d(f.Object.prototype,{x:0,y:0,z:0,position:function(k,m,l){switch(arguments.length){case 1:this.x=k;this.y=k;this.z=k;break;case 2:this.x=k;this.y=m;break;case 3:this.x=k;this.y=m;this.z=l;break}return this},move:function(k,m,l){switch(arguments.length){case 1:this.x+=k;this.y+=k;this.z+=k;break;case 2:this.x+=k;this.y+=m;break;case 3:this.x+=k;this.y+=m;this.z+=l;break}return this},rotationX:0,rotationY:0,rotationZ:0,rotation:function(k,m,l){switch(arguments.length){case 1:this.rotationX=k;this.rotationY=k;this.rotationZ=k;break;case 2:this.rotationX=k;this.rotationY=m;break;case 3:this.rotationX=k;this.rotationY=m;this.rotationZ=l;break}return this},rotate:function(k,m,l){switch(arguments.length){case 1:this.rotationX+=k;this.rotationY+=k;this.rotationZ+=k;break;case 2:this.rotationX+=k;this.rotationY+=m;break;case 3:this.rotationX+=k;this.rotationY+=m;this.rotationZ+=l;break}return this},scaleX:1,scaleY:1,scaleZ:1,scale:function(k,m,l){switch(arguments.length){case 1:this.scaleX=k;this.scaleY=k;this.scaleZ=k;break;case 2:this.scaleX=k;this.scaleY=m;break;case 3:this.scaleX=k;this.scaleY=m;this.scaleZ=l;break}return this},width:0,height:0,depth:0,size:function(k,m,l){switch(arguments.length){case 1:this.width=k;this.height=k;this.depth=k;break;case 2:this.width=k;this.height=m;break;case 3:this.width=k;this.height=m;this.depth=l;break}return this},originX:0,originY:0,originZ:0,__orgO:{x:0,y:0,z:0},__orgT:{x:0,y:0,z:0},__orgF:{x:0,y:0,z:0},origin:function(k,m,l){switch(arguments.length){case 1:this.originX=k;this.originY=k;this.originZ=k;break;case 2:this.originX=k;this.originY=m;break;case 3:this.originX=k;this.originY=m;this.originZ=l;break}return this},__name:"",name:function(k){this.__name=k;if(k==""){delete this.el.dataset.name}else{this.el.dataset.name=k}return this},__sort:["X","Y","Z"],sort:function(m,l,k){if(arguments.length>3){throw"sort arguments is wrong!"}this.__sort=[m,l,k];return this},initialize:function(){this.x=0;this.y=0;this.z=0;this.rotationX=0;this.rotationY=0;this.rotationZ=0;this.scaleX=1;this.scaleY=1;this.scaleZ=1;this.width=0;this.height=0;this.depth=0;this.originX="50%";this.originY="50%";this.originZ="0px";this.__orgO={x:"50%",y:"50%",z:"0px"};this.__orgT={x:"-50%",y:"-50%",z:"0px"};this.__orgF={x:0,y:0,z:0};this.children=[];this.__name=""},parent:null,children:null,addChild:function(k){if(k.parent!=null){k.parent.removeChild(k)}if(k.__name!=""){if(this[k.__name]!==undefined){throw k.__name+" already exist!"}this[k.__name]=k}this.children.push(k);k.parent=this;return this},removeChild:function(k){for(var l=this.children.length-1;l>=0;l--){if(this.children[l]===k){if(k.__name!=""){delete this[k.__name]}this.children.splice(l,1);k.parent=null;return this}}return this},removeAllChild:function(){for(var l=this.children.length-1;l>=0;l--){var k=this.children[l];if(k.__name!=""){delete this[k.__name]}k.parent=null}this.children=[];return this},remove:function(){if(this.parent!=null){this.parent.removeChild(this)}return this}});f.Object.extend=a;f.Sprite=f.Object.extend({el:null,alpha:1,visible:true,initialize:function(k){f.Sprite.__super__.initialize.apply(this,[k]);this.alpha=1;this.visible=true;var l;if(k&&k.el){switch(typeof k.el){case"string":l=document.createElement("div");l.innerHTML=k.el;break;case"object":if(k.el.nodeType===1){l=k.el}break}}if(!l){l=document.createElement("div")}l.style.position="absolute";l.style[c+"Transform"]="translateZ(0px)";l.style[c+"TransformStyle"]="preserve-3d";this.el=l;l.le=this},update:function(){this.updateS();this.updateM();this.updateO();this.updateT();this.updateV();return this},updateS:function(){return this},updateM:function(){if(!this.__mat){return this}for(var k in this.__mat){switch(k){case"bothsides":this.el.style[c+"BackfaceVisibility"]=this.__mat[k]?"visible":"hidden";break;case"image":this.el.style["background"+b(k)]=this.__mat[k]!==""?("url("+this.__mat[k]+")"):"";break;default:this.el.style["background"+b(k)]=this.__mat[k];break}}return this},updateO:function(){if(typeof(this.originX)=="number"){var m=i(this.originX-this.__orgF.x);this.__orgO.x=m+"px";this.__orgT.x=-m+"px"}else{this.__orgO.x=this.originX;this.__orgT.x="-"+this.originX}if(typeof(this.originY)=="number"){var l=i(this.originY-this.__orgF.y);this.__orgO.y=l+"px";this.__orgT.y=-l+"px"}else{this.__orgO.y=this.originY;this.__orgT.y="-"+this.originY}if(typeof(this.originZ)=="number"){var k=i(this.originZ-this.__orgF.z);this.__orgO.z=k+"px";this.__orgT.z=-k+"px"}else{this.__orgO.z=this.__orgT.z="0px"}this.el.style[c+"TransformOrigin"]=this.__orgO.x+" "+this.__orgO.y+" "+this.__orgO.z;return this},updateT:function(){var l=this.__sort[0];var k=this.__sort[1];var m=this.__sort[2];this.el.style[c+"Transform"]="translate3d("+this.__orgT.x+", "+this.__orgT.y+", "+this.__orgT.z+") translate3d("+g(this.x)+"px,"+g(this.y)+"px,"+g(this.z)+"px) rotate"+l+"("+g(this["rotation"+l])%360+"deg) rotate"+k+"("+g(this["rotation"+k])%360+"deg) rotate"+m+"("+g(this["rotation"+m])%360+"deg) scale3d("+g(this.scaleX)+", "+g(this.scaleY)+", "+g(this.scaleZ)+") ";return this},updateV:function(){this.el.style.opacity=this.alpha;this.el.style.display=this.visible?"block":"none";return this},addChild:function(k){f.Sprite.__super__.addChild.apply(this,[k]);if(this.el&&k.el){this.el.appendChild(k.el)}return this},removeChild:function(k){for(var l=this.children.length-1;l>=0;l--){if(this.children[l]===k){if(k.__name!=""){delete this[k.__name]}this.children.splice(l,1);k.parent=null;this.el.removeChild(k.el);return this}}return this},removeAllChild:function(){for(var l=this.children.length-1;l>=0;l--){var k=this.children[l];if(k.__name!=""){delete this[k.__name]}k.parent=null;this.el.removeChild(k.el)}this.children=[];return this},on:function(l){if(typeof(l)==="object"){for(var k in l){this.el.addEventListener(k,l[k],false)}}else{if(arguments.length===2){this.el.addEventListener(arguments[0],arguments[1],false)}else{if(arguments.length===3){this.el.addEventListener(arguments[0],arguments[1],arguments[2])}}}return this},off:function(l){if(typeof(l)==="object"){for(var k in l){this.el.removeEventListener(k,l[k],false)}}else{if(arguments.length===2){this.el.removeEventListener(arguments[0],arguments[1],false)}}return this},buttonMode:function(k){if(k){this.el.style.cursor="pointer"}else{this.el.style.cursor="auto"}return this},__mat:null,material:function(k){this.__mat=k;return this},visibility:function(k){if(k.visible!==undefined){this.visible=k.visible}if(k.alpha!==undefined){this.alpha=k.alpha}return this}});f.Stage=f.Sprite.extend({camera:null,fov:null,__rfix:null,__pfix:null,initialize:function(k){f.Stage.__super__.initialize.apply(this,[k]);if(!(k&&k.el)){this.el.style.top="0px";this.el.style.left="0px";this.el.style.width="0px";this.el.style.height="0px"}this.el.style[c+"Perspective"]="800px";this.el.style[c+"TransformStyle"]="flat";this.el.style[c+"Transform"]="";this.el.style.overflow="hidden";this.__rfix=new f.Sprite();this.el.appendChild(this.__rfix.el);this.__pfix=new f.Sprite();this.__rfix.el.appendChild(this.__pfix.el);this.setCamera(new f.Camera())},updateS:function(){this.el.style.width=i(this.width)+"px";this.el.style.height=i(this.height)+"px";return this},updateT:function(){this.fov=i(0.5/Math.tan((this.camera.fov*0.5)/180*Math.PI)*this.height);this.el.style[c+"Perspective"]=this.fov+"px";this.__rfix.position(i(this.width/2),i(this.height/2),this.fov).rotation(-this.camera.rotationX,-this.camera.rotationY,-this.camera.rotationZ).updateT();this.__pfix.position(-this.camera.x,-this.camera.y,-this.camera.z).updateT();return this},addChild:function(k){this.__pfix.addChild(k);return this},removeChild:function(k){this.__pfix.removeChild(k);return this},setCamera:function(k){if(this.camera){this.camera.stage=null}this.camera=k;this.camera.stage=this;return this}});f.Camera=f.Object.extend({fov:null,stage:null,initialize:function(k){f.Camera.__super__.initialize.apply(this,[k]);this.fov=75},update:function(){this.updateT();return this},updateS:function(){return this},updateM:function(){return this},updateT:function(){if(this.stage){this.stage.updateT()}return this},updateV:function(){return this}});f.Plane=f.Sprite.extend({initialize:function(k){f.Plane.__super__.initialize.apply(this,[k])},update:function(){f.Plane.__super__.update.apply(this);this.updateF();return this},updateS:function(){this.el.style.width=i(this.width)+"px";this.el.style.height=i(this.height)+"px";return this},updateF:function(){if(!this.__flt){return this}var k="";for(var l in this.__flt){k+=(this.__flt[l]!==""?(l+"("+this.__flt[l].join(",")+")"):"")}if(k!==""){this.el.style[c+"Filter"]=k}return this},__flt:null,filter:function(k){this.__flt=k;return this}});f.Box=f.Sprite.extend({front:null,back:null,left:null,right:null,up:null,down:null,initialize:function(k){f.Box.__super__.initialize.apply(this,[k]);this.front=new f.Plane();this.front.name="front";this.addChild(this.front);this.back=new f.Plane();this.back.name="back";this.addChild(this.back);this.left=new f.Plane();this.left.name="left";this.addChild(this.left);this.right=new f.Plane();this.right.name="right";this.addChild(this.right);this.up=new f.Plane();this.up.name="up";this.addChild(this.up);this.down=new f.Plane();this.down.name="down";this.addChild(this.down)},update:function(){f.Box.__super__.update.apply(this);this.updateF();return this},updateS:function(){var l=i(this.width);var m=i(this.height);var k=i(this.depth);this.__orgF.x=this.width/2;this.__orgF.y=this.height/2;this.__orgF.z=this.depth/2;this.front.size(l,m,0).position(0,0,k/2).rotation(0,0,0).updateS().updateT();this.back.size(l,m,0).position(0,0,-k/2).rotation(0,180,0).updateS().updateT();this.left.size(k,m,0).position(-l/2,0,0).rotation(0,-90,0).updateS().updateT();this.right.size(k,m,0).position(l/2,0,0).rotation(0,90,0).updateS().updateT();this.up.size(l,k,0).position(0,-m/2,0).rotation(90,0,0).updateS().updateT();this.down.size(l,k,0).position(0,m/2,0).rotation(-90,0,0).updateS().updateT();return this},updateM:function(){if(!this.__mat){return this}var k=true;for(var l in this.__mat){switch(l){case"front":case"back":case"left":case"right":case"up":case"down":if(this.__mat[l].bothsides==undefined){this.__mat[l].bothsides=false}this[l].material(this.__mat[l]).updateM();k=false;break}}if(k){if(this.__mat.bothsides==undefined){this.__mat.bothsides=false}this.front.material(this.__mat).updateM();this.back.material(this.__mat).updateM();this.left.material(this.__mat).updateM();this.right.material(this.__mat).updateM();this.up.material(this.__mat).updateM();this.down.material(this.__mat).updateM()}return this},updateF:function(){if(!this.__flt){return this}this.front.filter(this.__flt).updateF();this.back.filter(this.__flt).updateF();this.left.filter(this.__flt).updateF();this.right.filter(this.__flt).updateF();this.up.filter(this.__flt).updateF();this.down.filter(this.__flt).updateF();return this},__flt:null,filter:function(k){this.__flt=k;return this}});f.Skybox=f.Box.extend({updateS:function(){var l=i(this.width);var m=i(this.height);var k=i(this.depth);this.__orgF.x=this.width/2;this.__orgF.y=this.height/2;this.__orgF.z=this.depth/2;this.front.size(l,m,0).position(0,0,-k/2).rotation(0,0,0).updateS().updateT();this.back.size(l,m,0).position(0,0,k/2).rotation(0,180,0).updateS().updateT();this.left.size(k,m,0).position(-l/2,0,0).rotation(0,90,0).updateS().updateT();this.right.size(k,m,0).position(l/2,0,0).rotation(0,-90,0).updateS().updateT();this.up.size(l,k,0).position(0,-m/2,0).rotation(-90,0,0).updateS().updateT();this.down.size(l,k,0).position(0,m/2,0).rotation(90,0,0).updateS().updateT();return this},});function j(o){var m;switch(o.type){case"sprite":m=new f.Sprite(o.el?{el:o.el}:undefined);break;case"plane":m=new f.Plane(o.el?{el:o.el}:undefined);break;case"box":m=new f.Box(o.el?{el:o.el}:undefined);break;case"skybox":m=new f.Skybox(o.el?{el:o.el}:undefined);break}if(o.size!=undefined){m.size.apply(m,o.size)}if(o.position!=undefined){m.position.apply(m,o.position)}if(o.rotation!=undefined){m.rotation.apply(m,o.rotation)}if(o.scale!=undefined){m.scale.apply(m,o.scale)}if(o.origin!=undefined){m.origin.apply(m,o.origin)}if(o.visibility!=undefined){m.visibility.apply(m,o.visibility)}if(o.material!=undefined){m.material.apply(m,o.material)}if(o.filter!=undefined){m.filter.apply(m,o.filter)}if(o.name!=undefined){m.name.apply(m,[o.name])}m.update();if(o.children){for(var n=0,l=o.children.length;n<l;n++){var p=o.children[n];var k=j(p);m.addChild(k)}}return m}f.create=function(k){var l;switch(typeof(k)){case"array":l={type:"sprite",children:k};break;case"object":l=k;break;default:return}return j(l)};return f}));
/*!
 * VERSION: 0.7.0
 * DATE: 2016-8-17
 * GIT:https://github.com/shrekshrek/jstween
 *
 * @author: Shrek.wang, shrekshrek@gmail.com
 **/
(function(b){var a=(typeof self=="object"&&self.self==self&&self)||(typeof global=="object"&&global.global==global&&global);if(typeof define==="function"&&define.amd){define(["exports"],function(c){a.JT=b(a,c)})}else{if(typeof exports!=="undefined"){b(a,exports)}else{a.JT=b(a,{})}}}(function(x,T){function m(W,V){for(var X in V){W[X]=V[X]}}function N(W,X){if(W.length&&W.length>0){for(var V=0;V<W.length;V++){X.call(W[V],V,W[V])}}else{X.call(W,0,W)}}function k(V){return V.replace(/([A-Z])/g,"-$1").toLowerCase()}function r(V){return V.replace(/\b(\w)|\s(\w)/g,function(W){return W.toUpperCase()})}function p(V){return Math.round(V*1000)/1000}Date.now=(Date.now||function(){return new Date().getTime()});var f=Date.now();var M=function(){return Date.now()-f};var G="";(function(){var V=document.createElement("div");var X=["Webkit","Moz","Ms","O"];for(var W in X){if((X[W]+"Transform") in V.style){G=X[W];break}}}());function E(V){if(V){return G+r(V)}else{return G}}var C=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(V){window.setTimeout(V,1000/60)};function D(V){if(!V){throw"target is undefined, can't tween!!!"}if(typeof(V)=="string"){return(typeof(document)==="undefined")?V:(document.querySelectorAll?document.querySelectorAll(V):document.getElementById((V.charAt(0)==="#")?V.substr(1):V))}else{return V}}function c(W,V){if(V=="rotation"||V=="scale"){return V}if(W._jt_obj[V]!==undefined){return V}if(W.style[V]!==undefined){return V}V=E(V);if(W.style[V]!==undefined){return V}return undefined}function L(aa,Z,Y,W){var ab={};if(Z instanceof Array){ab.num=[];for(var X in Z){var V=B(aa,Z[X]);ab.num[X]=V.num;ab.unit=V.unit}if(Y!=undefined){if(W){ab.num.push(Y.num)}else{ab.num.unshift(Y.num)}}}else{ab=B(aa,Z)}return ab}function B(Y,X){var V=O(X);if(Y.unit=="rem"&&V.unit!="rem"){t();Y.num=p(Y.num*l);Y.unit="px"}else{if(Y.unit!="rem"&&V.unit=="rem"){t();Y.num=p(Y.num/l);Y.unit="rem"}}var W;switch(V.ext){case"+=":W=Y.num+V.num;break;case"-=":W=Y.num-V.num;break;default:W=V.num;break}return{num:W,unit:V.unit||Y.unit}}function A(V){if(V._jt_obj==undefined){V._jt_obj={perspective:0,x:0,y:0,z:0,rotationX:0,rotationY:0,rotationZ:0,scaleX:1,scaleY:1,scaleZ:1,skewX:0,skewY:0,}}}function O(W){var X=/(\+=|-=|)(-|)(\d+\.\d+|\d+)(e[+-]?[0-9]{0,2}|)(rem|px|%|)/i;var V=X.exec(W);if(V){return{num:p(V[2]+V[3]+V[4]),unit:V[5],ext:V[1]}}else{return{num:0,unit:"px",ext:""}}}function z(V){return/\S\s+\S/g.test(V)||!/\d/g.test(V)}function P(W,V){switch(V){case"perspective":case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":return W._jt_obj[V];case"rotation":return W._jt_obj.rotationZ;case"scale":return W._jt_obj.scaleX;default:return J(W,V)}}function J(Y,W){if(Y.style[W]){return Y.style[W]}else{if(document.defaultView&&document.defaultView.getComputedStyle){var V=k(W);var X=document.defaultView.getComputedStyle(Y,"");return X&&X.getPropertyValue(V)}else{if(Y.currentStyle){return Y.currentStyle[W]}else{return null}}}}function R(X,V,W){switch(V){case"perspective":case"x":case"y":case"z":case"rotationX":case"rotationY":case"rotationZ":case"scaleX":case"scaleY":case"scaleZ":case"skewX":case"skewY":X._jt_obj[V]=W;return true;case"rotation":X._jt_obj.rotationZ=W;return true;case"scale":X._jt_obj.scaleX=W;X._jt_obj.scaleY=W;return true;default:F(X,V,W);return false}}function F(X,V,W){X.style[V]=W}function b(V){return typeof(V)==="object"&&V.nodeType===1}function i(W){var V="";if(W._jt_obj.perspective){V+="perspective("+W._jt_obj.perspective+") "}if(W._jt_obj.x||W._jt_obj.y||W._jt_obj.z){V+="translate3d("+s(W._jt_obj.x)+","+s(W._jt_obj.y)+","+s(W._jt_obj.z)+") "}if(W._jt_obj.rotationX){V+="rotateX("+W._jt_obj.rotationX%360+"deg) "}if(W._jt_obj.rotationY){V+="rotateY("+W._jt_obj.rotationY%360+"deg) "}if(W._jt_obj.rotationZ){V+="rotateZ("+W._jt_obj.rotationZ%360+"deg) "}if(W._jt_obj.scaleX!=1||W._jt_obj.scaleY!=1||W._jt_obj.scaleZ!=1){V+="scale3d("+W._jt_obj.scaleX+", "+W._jt_obj.scaleY+", "+W._jt_obj.scaleZ+") "}if(W._jt_obj.skewX||W._jt_obj.skewY){V+="skew("+W._jt_obj.skewX+"deg,"+W._jt_obj.skewY+"deg) "}W.style[E("transform")]=V}function s(V){return V+(typeof(V)=="number"?"px":"")}var v,j,l;function t(){if(!j){j=document.createElement("div");j.style.cssText="border:0 solid; position:absolute; line-height:0px;"}if(!v){v=document.getElementsByTagName("body")[0]}v.appendChild(j);j.style.borderLeftWidth="1rem";l=parseFloat(j.offsetWidth);v.removeChild(j)}var S=[];var n=false;var U=0;function u(){n=true;var W=S.length;var V=K.length;if(W===0&&V===0){n=false;return}var ab=M();var aa=ab-U;U=ab;for(var Z=0;Z<W;Z++){var ac=S[Z];if(ac&&!ac._update(aa)){if(ac.isActive){ac.isActive=false;S.splice(Z,1);if(ac.onEnd){ac.onEnd.apply(ac,ac.onEndParams)}}Z--;W--}}for(var Y=0;Y<V;Y++){var X=K[Y];if(X&&!X._update(aa)){K.splice(Y,1);if(X.onEnd){X.onEnd.apply(X,X.onEndParams)}Y--;V--}}C(u)}function o(){this.initialize.apply(this,arguments)}m(o.prototype,{initialize:function(Y,X,Z,W,V){this.fromVars=Z;this.curVars={};this.toVars=W;this.target=Y;this.duration=Math.max(X,0)*1000;this.ease=W.ease||T.Linear.None;this.delay=Math.max(W.delay||0,0)*1000;this.yoyo=W.yoyo||false;this.repeat=this.curRepeat=Math.floor(W.repeat||0);this.repeatDelay=Math.max(W.repeatDelay||0,0)*1000;this.onStart=W.onStart||null;this.onStartParams=W.onStartParams||[];this.onRepeat=W.onRepeat||null;this.onRepeatParams=W.onRepeatParams||[];this.onEnd=W.onEnd||null;this.onEndParams=W.onEndParams||[];this.onUpdate=W.onUpdate||null;this.onUpdateParams=W.onUpdateParams||[];this.isPlaying=W.isPlaying||true;this.interpolation=W.interpolation||null;this.isActive=W.isActive||true;this.isReverse=false;this.isDom=V;this.curTime=0;this.isStart=false;this.startTime=this.delay;this.endTime=this.startTime+this.repeatDelay+this.duration;if(this.delay!=0){this._updateProp();if(this.onUpdate){this.onUpdate.apply(this,this.onUpdateParams)}}if(this.isActive){this._addSelf()}},_update:function(W){if(!this.isPlaying){return true}this.curTime+=W;if(this.curTime<this.startTime){return true}if(!this.isStart){this.curTime+=this.repeatDelay}if(this.curTime<this.startTime+this.repeatDelay){return true}if(this.curTime<this.endTime){this._updateProp();if(this.onUpdate){this.onUpdate.apply(this,this.onUpdateParams)}}else{if(this.curRepeat==0){this._updateProp();if(this.onUpdate){this.onUpdate.apply(this,this.onUpdateParams)}this._checkStart();return false}if(this.yoyo){this.isReverse=!this.isReverse}var V=(this.curTime-this.endTime)%(this.duration+this.repeatDelay);if(this.repeatDelay==0){this.curTime=this.startTime+V;this._updateProp()}else{this._updateProp();this.curTime=this.startTime+V}if(this.onUpdate){this.onUpdate.apply(this,this.onUpdateParams)}if(this.onRepeat){this.onRepeat.apply(this,this.onRepeatParams)}if(this.curRepeat>0){this.curRepeat--}}this._checkStart();return true},_checkStart:function(){if(!this.isStart){this.isStart=true;if(this.onStart){this.onStart.apply(this,this.onStartParams)}}},_updateProp:function(){var Z=this.duration==0?1:((this.curTime-this.startTime-this.repeatDelay)/this.duration);Z=Math.max(0,Math.min(1,Z));if(this.isReverse){Z=1-Z}var Y=this.ease(Z);var ab=false;for(var aa in this.fromVars){var X=this.fromVars[aa];var W=this.toVars[aa];var V;if(W.num instanceof Array){V=this.interpolation(W.num,Y)}else{V=X.num+(W.num-X.num)*Y}V=p(V);this.curVars[aa]={num:V,unit:W.unit};if(this.isDom){if(Math.abs(W.num-X.num)>20){V=Math.round(V)}if(R(this.target,aa,V+(W.unit||0))){ab=true}}else{this.target[aa]=V+(W.unit||0)}}if(ab){i(this.target)}},_toEnd:function(){var Y=false;for(var X in this.fromVars){var W=this.toVars[X];var V=p(W.num);this.curVars[X]={num:V,unit:W.unit};if(this.isDom){if(R(this.target,X,V+(W.unit||0))){Y=true}}else{this.target[X]=V+(W.unit||0)}}if(Y){i(this.target)}},_addSelf:function(){this.isActive=true;S.push(this);if(!n){U=T.now();u()}},_removeSelf:function(){this.isActive=false;var V=S.indexOf(this);if(V!==-1){S.splice(V,1)}},active:function(){this._addSelf()},play:function(){this.isPlaying=true},pause:function(){this.isPlaying=false},kill:function(V){this._removeSelf();if(V){this._toEnd();if(this.onEnd){this.onEnd.apply(this,this.onEndParams)}}}});m(T,{get:function(X,Y){var W=D(X);if(W.length!==undefined){W=W[0]}if(b(W)){A(W);var V=c(W,Y);if(V){return P(W,V)}else{return null}}else{return W[Y]}},set:function(W,X){var V=D(W);N(V,function(ab,ad){if(b(ad)){A(ad);var ae=false;for(var ac in X){var Z=c(ad,ac);if(Z){if(z(X[ac])){R(ad,Z,X[ac])}else{var Y=L(O(P(ad,Z)),X[ac]);if(R(ad,Z,Y.num+(Y.unit||0))){ae=true}}}}if(ae){i(ad)}}else{for(var aa in X){var Y=L(O(ad[aa]),X[aa]);ad[aa]=Y.num+(Y.unit||0)}}})},fromTo:function(Z,Y,aa,X){e(X);var W=D(Z);var V=[];N(W,function(ai,af){var ad={};var ae={};var ah=b(af);if(ah){A(af);for(var ag in X){var aj=c(af,ag);if(aj){var ac=O(P(af,aj));ad[aj]=L(ac,aa[ag]);ae[aj]=L(ac,X[ag],ad[aj],false)}else{ae[ag]=X[ag]}}}else{for(var ag in X){if((af[ag]!==undefined)){var ac=O(af[ag]);ad[ag]=L(ac,aa[ag]);ae[ag]=L(ac,X[ag],ad[ag],false)}else{ae[ag]=X[ag]}}}var ab=new o(af,Y,ad,ae,ah);V.push(ab)});if(V.length==1){return V[0]}else{return V}},from:function(Y,X,Z){e(Z);var W=D(Y);var V=[];N(W,function(ah,ae){var ac={};var ad={};var ag=b(ae);if(ag){A(ae);for(var af in Z){var ai=c(ae,af);if(ai){var ab=O(P(ae,ai));ac[ai]=L(ab,Z[af],ab,true);ad[ai]=ab}else{ad[af]=Z[af]}}}else{for(var af in Z){if((ae[af]!==undefined)){var ab=O(ae[af]);ac[af]=L(ab,Z[af],ab,true);ad[af]=ab}else{ad[af]=Z[af]}}}var aa=new o(ae,X,ac,ad,ag);V.push(aa)});if(V.length==1){return V[0]}else{return V}},to:function(Z,Y,X){e(X);var W=D(Z);var V=[];N(W,function(ah,ae){var ac={};var ad={};var ag=b(ae);if(ag){A(ae);for(var af in X){var ai=c(ae,af);if(ai){var ab=O(P(ae,ai));ac[ai]=ab;ad[ai]=L(ab,X[af],ab,false)}else{ad[af]=X[af]}}}else{for(var af in X){if((ae[af]!==undefined)){var ab=O(ae[af]);ac[af]=ab;ad[af]=L(ab,X[af],ab,false)}else{ad[af]=X[af]}}}var aa=new o(ae,Y,ac,ad,ag);V.push(aa)});if(V.length==1){return V[0]}else{return V}},kill:function(X,W){var V=D(X);N(V,function(Z,ab){var Y=S.length;for(var aa=Y-1;aa>=0;aa--){var ac=S[aa];if(ac.target===ab){ac.kill(W)}}})},killAll:function(X){var V=S.length;for(var W=V-1;W>=0;W--){var Y=S[W];Y.kill(X)}},play:function(V){w(V,"play")},playAll:function(){q("play")},pause:function(V){w(V,"pause")},pauseAll:function(){q("pause")},isTweening:function(Y){var W=D(Y);W=W[0]||W;var V=S.length;for(var X=V-1;X>=0;X--){var Z=S[X];if(Z.target===W){return true}}return false}});function w(Y,X){var W=D(Y);var V=S.length;N(W,function(Z,ab){for(var aa=V-1;aa>=0;aa--){var ac=S[aa];if(ac.target===ab){ac[X]()}}})}function q(X){var V=S.length;for(var W=V-1;W>=0;W--){var Y=S[W];Y[X]()}}var K=[];function d(){this.initialize.apply(this,arguments)}m(d.prototype,{initialize:function(W,Y,X,V){this.delay=W*1000;this.onEnd=Y||null;this.onEndParams=X||[];this.curTime=0;this.endTime=this.delay;this.isPlaying=V||true;if(this.delay!=0){this._addSelf()}else{if(this.onEnd){this.onEnd.apply(this,this.onEndParams)}}},_update:function(V){if(!this.isPlaying){return true}this.curTime+=V;if(this.curTime<this.endTime){return true}return false},_addSelf:function(){K.push(this);if(!n){U=T.now();u()}},_removeSelf:function(){var V=K.indexOf(this);if(V!==-1){K.splice(V,1)}},play:function(){this.isPlaying=true},pause:function(){this.isPlaying=false},kill:function(V){this._removeSelf();if(V){this._toEnd();if(this.onEnd){this.onEnd.apply(this,this.onEndParams)}}}});m(T,{call:function(W,Y,X,V){return new d(W,Y,X,V)},killCall:function(Y,X){var W=Y;var V=K.length;N(W,function(aa,ac){for(var ab=V-1;ab>=0;ab--){var Z=K[ab];if(Z.onEnd===ac){Z.kill(X)}}})},killAllCalls:function(Y){var V=K.length;for(var X=V-1;X>=0;X--){var W=K[X];W.kill(Y)}},playCall:function(V){I(V,"play")},playAllCalls:function(){Q("play")},pauseCall:function(V){I(V,"pause")},pauseAllCalls:function(){Q("pause")}});function I(Y,X){var W=Y;var V=K.length;N(W,function(aa,ac){for(var ab=V-1;ab>=0;ab--){var Z=K[ab];if(Z.onEnd===ac){Z[X]()}}})}function Q(Y){var V=K.length;for(var X=V-1;X>=0;X--){var W=K[X];W[Y]()}}m(T,{path:function(ab){e(ab);var aa=ab.ease||T.Linear.None;var Z=ab.step||1;var ac,W=[];for(var Y=0;Y<=Z;Y++){ac=aa(Y/Z);var V={};for(var X in ab){if(ab[X] instanceof Array){V[X]=ab.interpolation(ab[X],ac)}}W.push(V)}return W}});function e(V){if(V.bezier){y(V,V.bezier);V.interpolation=h;delete V.bezier}if(V.through){y(V,V.through);V.interpolation=a;delete V.through}if(V.linear){y(V,V.linear);V.interpolation=g;delete V.linear}}function y(Y,V){for(var X in V){for(var W in V[X]){if(X==0){Y[W]=[V[X][W]]}else{Y[W].push(V[X][W])}}}}function g(X,W){var V=X.length-1,aa=V*W,Y=Math.floor(aa),Z=H.Linear;if(W<0){return Z(X[0],X[1],aa)}if(W>1){return Z(X[V],X[V-1],V-aa)}return Z(X[Y],X[Y+1>V?V:Y+1],aa-Y)}function h(X,W){var V=0,ab=X.length-1,Z=Math.pow,aa=H.Bernstein,Y;for(Y=0;Y<=ab;Y++){V+=Z(1-W,ab-Y)*Z(W,Y)*X[Y]*aa(ab,Y)}return V}function a(X,W){var V=X.length-1,aa=V*W,Y=Math.floor(aa),Z=H.Through;if(X[0]===X[V]){if(W<0){Y=Math.floor(aa=V*(1+W))}return Z(X[(Y-1+V)%V],X[Y],X[(Y+1)%V],X[(Y+2)%V],aa-Y)}else{if(W<0){return X[0]-(Z(X[0],X[0],X[1],X[1],-aa)-X[0])}if(W>1){return X[V]-(Z(X[V],X[V],X[V-1],X[V-1],aa-V)-X[V])}return Z(X[Y?Y-1:0],X[Y],X[V<Y+1?V:Y+1],X[V<Y+2?V:Y+2],aa-Y)}}var H={Linear:function(X,W,V){return(W-X)*V+X},Bernstein:function(X,V){var W=H.Factorial;return W(X)/W(V)/W(X-V)},Factorial:(function(){var V=[1];return function(Y){var X=1,W;if(V[Y]){return V[Y]}for(W=Y;W>1;W--){X*=W}return V[Y]=X}})(),Through:function(ac,ab,Z,Y,ad){var aa=(Z-ac)*0.5,X=(Y-ab)*0.5,W=ad*ad,V=ad*W;return(2*ab-2*Z+aa+X)*V+(-3*ab+3*Z-2*aa-X)*W+aa*ad+ab}};m(T,{Linear:{None:function(V){return V}},Quad:{In:function(V){return V*V},Out:function(V){return V*(2-V)},InOut:function(V){if((V*=2)<1){return 0.5*V*V}return -0.5*(--V*(V-2)-1)}},Cubic:{In:function(V){return V*V*V},Out:function(V){return --V*V*V+1},InOut:function(V){if((V*=2)<1){return 0.5*V*V*V}return 0.5*((V-=2)*V*V+2)}},Quart:{In:function(V){return V*V*V*V},Out:function(V){return 1-(--V*V*V*V)},InOut:function(V){if((V*=2)<1){return 0.5*V*V*V*V}return -0.5*((V-=2)*V*V*V-2)}},Quint:{In:function(V){return V*V*V*V*V},Out:function(V){return --V*V*V*V*V+1},InOut:function(V){if((V*=2)<1){return 0.5*V*V*V*V*V}return 0.5*((V-=2)*V*V*V*V+2)}},Sine:{In:function(V){return 1-Math.cos(V*Math.PI/2)},Out:function(V){return Math.sin(V*Math.PI/2)},InOut:function(V){return 0.5*(1-Math.cos(Math.PI*V))}},Expo:{In:function(V){return V===0?0:Math.pow(1024,V-1)},Out:function(V){return V===1?1:1-Math.pow(2,-10*V)},InOut:function(V){if(V===0){return 0}if(V===1){return 1}if((V*=2)<1){return 0.5*Math.pow(1024,V-1)}return 0.5*(-Math.pow(2,-10*(V-1))+2)}},Circ:{In:function(V){return 1-Math.sqrt(1-V*V)},Out:function(V){return Math.sqrt(1-(--V*V))},InOut:function(V){if((V*=2)<1){return -0.5*(Math.sqrt(1-V*V)-1)}return 0.5*(Math.sqrt(1-(V-=2)*V)+1)}},Elastic:{In:function(W){var X,V=0.1,Y=0.4;if(W===0){return 0}if(W===1){return 1}if(!V||V<1){V=1;X=Y/4}else{X=Y*Math.asin(1/V)/(2*Math.PI)}return -(V*Math.pow(2,10*(W-=1))*Math.sin((W-X)*(2*Math.PI)/Y))},Out:function(W){var X,V=0.1,Y=0.4;if(W===0){return 0}if(W===1){return 1}if(!V||V<1){V=1;X=Y/4}else{X=Y*Math.asin(1/V)/(2*Math.PI)}return(V*Math.pow(2,-10*W)*Math.sin((W-X)*(2*Math.PI)/Y)+1)},InOut:function(W){var X,V=0.1,Y=0.4;if(W===0){return 0}if(W===1){return 1}if(!V||V<1){V=1;X=Y/4}else{X=Y*Math.asin(1/V)/(2*Math.PI)}if((W*=2)<1){return -0.5*(V*Math.pow(2,10*(W-=1))*Math.sin((W-X)*(2*Math.PI)/Y))}return V*Math.pow(2,-10*(W-=1))*Math.sin((W-X)*(2*Math.PI)/Y)*0.5+1}},Back:{In:function(V){var W=1.70158;return V*V*((W+1)*V-W)},Out:function(V){var W=1.70158;return --V*V*((W+1)*V+W)+1},InOut:function(V){var W=1.70158*1.525;if((V*=2)<1){return 0.5*(V*V*((W+1)*V-W))}return 0.5*((V-=2)*V*((W+1)*V+W)+2)}},Bounce:{In:function(V){return 1-T.Bounce.Out(1-V)},Out:function(V){if(V<(1/2.75)){return 7.5625*V*V}else{if(V<(2/2.75)){return 7.5625*(V-=(1.5/2.75))*V+0.75}else{if(V<(2.5/2.75)){return 7.5625*(V-=(2.25/2.75))*V+0.9375}else{return 7.5625*(V-=(2.625/2.75))*V+0.984375}}}},InOut:function(V){if(V<0.5){return T.Bounce.In(V*2)*0.5}return T.Bounce.Out(V*2-1)*0.5+0.5}}});T.now=M;return T}));