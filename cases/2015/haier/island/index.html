<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>海尔商城生活+大联盟</title>
<script>
var phoneWidth =  parseInt(window.screen.width);
var phoneScale = phoneWidth/640;
var ua = navigator.userAgent;
if (/Android (\d+\.\d+)/.test(ua)){
  var version = parseFloat(RegExp.$1);
  if(version>2.3){
    document.write('<meta name="viewport" content="width=640, minimum-scale = '+phoneScale+', maximum-scale = '+phoneScale+', target-densitydpi=device-dpi">');
  }else{
    document.write('<meta name="viewport" content="width=640, target-densitydpi=device-dpi">');
  }
} else {
  document.write('<meta name="viewport" content="width=640, user-scalable=no, target-densitydpi=device-dpi">');
}
</script>
<link href="css/style.css" rel="stylesheet">
</head>
<body>
<div id="loading">
  <div class="spinner">
    <div class="bounce1"></div>
    <div class="bounce2"></div>
    <div class="bounce3"></div>
  </div>
  <p>loading...</p>
</div>
<img src="img/icon.jpg" alt="" class="shareicon">
<div class="wrap" id="wrap">
  <img data-src="img/a01.jpg" width="640" height="1008" alt="" class="bgclr">
  <div id="island" class="island">
    <!-- <img data-src="img/a00.jpg" width="1800" height="2093" alt=""> -->
    <img data-src="img/a00.png" width="1778" alt="" class="islandbody">
    <img data-src="img/a63.png" width="125" height="185" alt="" class="tingisland2">
    <img data-src="img/a51.png" width="330" height="210" alt="" class="tingisland">
    <img data-src="img/a04.png" width="372" height="270" alt="" class="fish1 optional">
    <img data-src="img/a04.png" width="372" height="270" alt="" class="fish2 optional">
    <img data-src="img/a04.png" width="372" height="270" alt="" class="fish3 optional">
    <img data-src="img/a04.png" width="372" height="270" alt="" class="fish4 optional">
    <div class="whale optional">
      <img data-src="img/a12.png" width="117" height="59" alt="" class="whalewave">
      <img data-src="img/a10.png" width="350" height="273" alt="" class="whalebody">
      <img data-src="img/a11.png" width="68" height="81" alt="" class="whaleeye optional">
      <div class="waterspray">
        <div class="wtrs1 wtrs"></div>
        <div class="wtrs2 wtrs"></div>
        <div class="wtrs3 wtrs"></div>
        <div class="wtrs4 wtrs"></div>
        <div class="wtrs5 wtrs"></div>
        <img data-src="img/a08.png" width="106" height="113" alt="" class="wtrsbody">
      </div>
    </div>
    <div class="smallisland"><img data-src="img/a09.png" width="399"  alt=""></div>
    <div class="octopus">
      <div class="fishmask">
        <div class="octopuscont optional">
          <img data-src="img/a52.png" width="370" height="158" alt="" class="octopusshadow">
          <img data-src="img/a54.png" width="238" height="122" alt="" class="octopuscontbody">
          <img data-src="img/a56.png" width="88" height="30" alt="" class="optopusmouth optional">
          <img data-src="img/a55.png" width="113" height="169" alt="" class="tentacle">
        </div>
      </div>
      <img data-src="img/a53.png" width="" alt="" class="octwater optional">
    </div>
    <img data-src="img/a57.png" width="190" height="85" alt="" class="swimman">
    <div class="p1">
      <img data-src="img/a05.png" width="646" height="513" alt="" class="p1-wave optional">
      <img data-src="img/a01.png" width="697" height="696" alt="" class="p1-boat">
      <img data-src="img/a02.png" width="52" height="63" alt="" class="p1-fire1">
      <img data-src="img/a03.png" width="49" height="61" alt="" class="p1-fire2">
    </div>
    <div class="islandcont">
      <div class="p2" data-id="2">
        <img data-src="img/a58.png" width="219" height="153" alt="" class="p2-tiny1">
        <img data-src="img/a59.png" width="156" height="113" alt="" class="p2-tiny2">
        <img data-src="img/a60.png" width="110" height="107" alt="" class="p2-tiny3">
        <img data-src="img/a13.png" width="162" height="163" alt="" class="p2-balloon2 p2-balloon">
        <img data-src="img/a14.png" width="129" height="144" alt="" class="p2-balloon3 p2-balloon optional">
        <img data-src="img/a16.png" width="290" height="312" alt="" class="p2-balloon1 p2-balloon">
      </div>
      <div class="p3" data-id="3">
        <div class="p3-circarea">
          <img data-src="img/a17.png" width="293" height="275" alt="" class="p3-circ">
          <img data-src="img/a19.png" width="60" height="65" alt="" class="p3-camera1 p3-cmr">
          <img data-src="img/a19.png" width="60" height="65" alt="" class="p3-camera2 p3-cmr">
          <img data-src="img/a19.png" width="60" height="65" alt="" class="p3-camera3 p3-cmr">
          <img data-src="img/a19.png" width="60" height="65" alt="" class="p3-camera4 p3-cmr">
          <img data-src="img/a19.png" width="60" height="65" alt="" class="p3-camera5 p3-cmr">
          <img data-src="img/a19.png" width="60" height="65" alt="" class="p3-camera6 p3-cmr">
          <img data-src="img/a19.png" width="60" height="65" alt="" class="p3-camera7 p3-cmr">
          <img data-src="img/a19.png" width="60" height="65" alt="" class="p3-camera8 p3-cmr">
        </div>
        <img data-src="img/a18.png" width="127" alt="195" class="p3-shelf">
        <img data-src="img/a20.png" width="189" height="84" alt="" class="p3-brand">
      </div>
      <div class="p4" data-id="4">
        <img data-src="img/a21.png" width="211" height="255" alt="" class="p4-body">
        <img data-src="img/a22.png" width="72" height="90" alt="" class="p4-hairboy1">
        <img data-src="img/a23.png" width="40" height="94" alt="" class="p4-hairboy2">
      </div>
      <div class="p5" data-id="5">
        <div class="p5-bus">
          <img data-src="img/a24.png" width="282" height="118" alt="" class="p5-busbody">
          <img data-src="img/a25.png" width="49" height="47" alt="" class="p5-wheel1">
          <img data-src="img/a26.png" width="48" height="49" alt="" class="p5-wheel2">
        </div>
        <img data-src="img/a27.png" width="149" height="78" alt="" class="p5-taxi optional">
        <img data-src="img/a28.png" width="179" height="56" alt="" class="p5-car optional">
        <img data-src="img/a29.png" width="111" height="151" alt="" class="p5-tip">
      </div>
      <div class="p7" data-id="7">
        <img data-src="img/a40.png" width="43" height="108" alt="" class="p7-ballute1 p7-ballute">
        <img data-src="img/a41.png" width="45" height="86" alt="" class="p7-ballute2 p7-ballute optional">
        <img data-src="img/a42.png" width="41" height="137" alt="" class="p7-ballute3 p7-ballute">
        <img data-src="img/a42.png" width="41" height="137" alt="" class="p7-ballute4 p7-ballute optional">
        <img data-src="img/a43.png" width="41" height="123" alt="" class="p7-ballute5 p7-ballute">
        <img data-src="img/a44.png" width="50" height="88" alt="" class="p7-ballute6 p7-ballute">
        <img data-src="img/a45.png" width="329" height="281" alt="" class="p7-hairhouse">
        <img data-src="img/a46.png" width="161" height="136" alt="" class="p7-attach">
        <div class="p7-num">
          <img data-src="img/a37.png" width="158" height="136" alt="">
          <div class="p7-fire1"><img data-src="img/a38.png" width="36" height="50" alt=""></div>
          <div class="p7-fire2"><img data-src="img/a39.png" width="34" height="54" alt=""></div>
        </div>
      </div>
      <div class="p6" data-id="6">
        <img data-src="img/a35.png" width="713" height="398" alt="" class="p6-shadow">
        <img data-src="img/a34.png" width="587" height="148" alt="" class="p6-rug">
        <img data-src="img/a33.png" width="57" height="79" alt="" class="p6-boy">
        <img data-src="img/a32.png" width="19" height="135" alt="" class="p6-singleshelf">
        <img data-src="img/a30.png" width="409" height="304" alt="" class="p6-verge">
        <img data-src="img/a31.png" width="193" height="463" alt="" class="p6-shelf">
        <img data-src="img/a62.png" width="106" height="138" alt="" class="p6-flower">
        <img data-src="img/a36.png" width="158" height="116" alt="" class="p6-tip">
      </div>
      <div class="p8" data-id="8">
        <img data-src="img/a47.png" width="343" height="167" alt="" class="p8-car optional">
        <img data-src="img/a48.png" width="452" height="362" alt="" class="p8-road">
      </div>
      <div class="p9" data-id="9">
        <img data-src="img/a50.png" width="429" height="389" alt="">
        <img data-src="img/a61.png" width="187" height="146" alt="" class="p9-house">
        <img data-src="img/a49.png" width="149" height="138" alt="" class="p9-ball">
        <img data-src="img/a13.png" width="162" height="163" alt="" class="p9-ballute1">
        <img data-src="img/a14.png" width="129" height="144" alt="" class="p9-ballute2">
      </div>
      <div class="p10" data-id="10">
        <div class="squirrel">
          <img data-src="img/a07.png" width="136" height="84" alt="" class="sqlshadow">
          <img data-src="img/a06.png" width="88" height="64" alt="" class="sqlbody">
        </div>
      </div>
      <div class="p-mask">
        <div class="p-maskinner">
          <div class="t3 tip" data-id="3">
            <!--<img data-src="img/a68.png" width="529" height="310" alt="">-->
            <img data-src="img/a75.png" width="529" height="296" alt="">
            <!--<p class="tiptxt">恭喜你！领到e袋洗</p>
            <h2 class="tipaward">29元优惠券一张</h2>-->
            <img data-src="img/a70.png" width="169" height="58" alt="" class="tiplink">
            <img data-src="img/a71.png" width="75" height="83" alt="" class="tipclose">
          </div>
          <div class="t4 tip" data-id="4">
            <!--<img data-src="img/a68.png" width="529" height="310" alt="">-->
            <img data-src="img/a76.png" width="529" height="315" alt="">
            <!--<p class="tiptxt">hello~我是大白</p>
            <h2 class="tipaward">快点把我抱回家吧！</h2>-->
            <img data-src="img/a74.png" width="169" height="58" alt="" class="tiplink">
            <img data-src="img/a71.png" width="75" height="83" alt="" class="tipclose">
          </div>
          <div class="t5 tip" data-id="5">
            <!--<img data-src="img/a68.png" width="529" height="310" alt="">-->
            <img data-src="img/a77.png" width="529" height="310" alt="">
            <!--<p class="tiptxt">滴滴出行，快乐出行，快享出发！</p>
            <h2 class="tipaward">滴滴派发礼包 速来领取</h2>-->
            <img data-src="img/a70.png" width="169" height="58" alt="" class="tiplink">
            <img data-src="img/a71.png" width="75" height="83" alt="" class="tipclose">
          </div>
          <div class="t6 tip" data-id="6">
            <!--<img data-src="img/a68.png" width="529" height="310" alt="">-->
            <img data-src="img/a78.png" width="529" height="310" alt="">
            <!--<p class="tiptxt">哇！LOVO送出</p>
            <h2 class="tipaward">满499减100<span>优惠券</span></h2>-
            <p class="tinytxt">购优质家纺 就上LOVO商城</p>-->
            <img data-src="img/a70.png" width="169" height="58" alt="" class="tiplink">
            <img data-src="img/a71.png" width="75" height="83" alt="" class="tipclose">
          </div>
          <div class="t7 tip" data-id="7">
            <!--<img data-src="img/a68.png" width="529" height="310" alt="">-->
            <img data-src="img/a79.png" width="529" height="310" alt="">
            <!--<p class="tiptxt">吃喝玩乐更多优惠在这里！</p>
            <h2 class="tipaward">海尔梦享+</h2>-->
            <img data-src="img/a70.png" width="169" height="58" alt="" class="tiplink">
            <img data-src="img/a71.png" width="75" height="83" alt="" class="tipclose">
          </div>
          <div class="t8 tip" data-id="8">
            <!--<img data-src="img/a68.png" width="529" height="310" alt="">-->
            <img data-src="img/a80.png" width="529" height="310" alt="">
            <!--<p class="tiptxt">东方日产新车特权</p>
            <h2 class="tipaward">领新逍客50%税券</h2>
            <h2 class="tipaward2">新蓝鸟、新楼兰3年保养券</h2>-->
            <img data-src="img/a70.png" width="169" height="58" alt="" class="tiplink">
            <img data-src="img/a71.png" width="75" height="83" alt="" class="tipclose">
          </div>
          <div class="t9 tip" data-id="9">
            <!--<img data-src="img/a68.png" width="529" height="310" alt="">-->
            <img data-src="img/a81.png" width="529" height="310" alt="">
            <!--<p class="tiptxt">请TA看电影</p>
            <h2 class="tipaward">糯米送15元红包</h2>
            <p class="tiptxt2">为了爱，还不勇敢点？</p>-->
            <img data-src="img/a70.png" width="169" height="58" alt="" class="tiplink">
            <img data-src="img/a71.png" width="75" height="83" alt="" class="tipclose">
          </div>
          <div class="t10 tip" data-id="10">
            <!--<img data-src="img/a69.png" width="464" height="386" alt="">-->
            <img data-src="img/a82.png" width="464" height="386" alt="">
            <!--<p class="tiptxt">去海尔商城享受超值优惠吧！</p>
            <h2 class="tipaward">欢迎光临生活家乐园<br>50元优惠券拿好</h2>-->
            <img data-src="img/a70.png" width="169" height="58" alt="" class="tiplink">
            <img data-src="img/a72.png" width="700" height="631" alt="" class="tipglow">
            <img data-src="img/a71.png" width="75" height="83" alt="" class="tipclose">
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="p-maskouter">
    <div class="t0 tip" data-id="0">
      <img data-src="img/a68.png" width="529" height="310" alt="">
      <p class="tiptxt">戳戳画面中在动的元素</p>
      <h2 class="tipaward">会有想不到的惊喜福利！</h2>
      <!-- <img data-src="img/a70.png" width="169" height="58" alt="" class="tiplink"> -->
     <!--  <img data-src="img/a71.png" width="75" height="83" alt="" class="tipclose"> -->
    </div>
  </div>
  <div class="p0">
    
    <div class="p0-top">
      <img data-src="img/a67.png" width="628" height="455" alt="" class="p0-cloud">
      
      <div class="p0-balloon">
        <img data-src="img/a16.png"  alt="">
      </div>
      <img data-src="img/a64.png?ver=1" width="579" height="296" alt="" class="p0-tit">
      <div class="p0-subtit">
        <img data-src="img/a65.png" width="364" height="68" alt=""><br>
        <img src="img/a73.png" width="117" height="101" alt="" class="p0-go">
      </div>
    </div>
    <img data-src="img/a66.png?ver=1" width="278" height="54" alt="" class="p0-logo">
  </div>
</div>
<script src="js/jquery-2.1.1.min.js"></script>
<script src="js/e-smart-zoom-jquery.min.js"></script>
<script>
//var mc=new Hammer(document.getElementById("island"));
// document.body.addEventListener('touchmove',function(e){
//   e.preventDefault();
// })
var u = navigator.userAgent, app = navigator.appVersion;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Linux') > -1; 
var arr=[
  {eleid:3,top:110,name:"e袋洗",link:"http://hongbao.rongchain.com/mobile.php?uuid=66d19e69bedb9700862b319761405f54&mark=1449624096C6Mh4I7d"},
  {eleid:4,top:610,name:"大白冰箱",link:"http://m.ehaier.com/mobile/item/12463.html"},
  {eleid:5,top:620,name:"滴滴出行",link:"http://dwz.cn/2iufiS"},
  {eleid:6,top:220,name:"罗莱家纺",link:"http://m.lovo.cn/activity/871.htm"},
  {eleid:7,top:-60,name:"梦享+平台",link:"http://m.haier.com/cnmobile/vip_user_center/mxj_coupon/coupon.shtml"},
  {eleid:8,top:0, name:"东风日产",link:"http://m.chebaba.com/topic/1212/index.html"},
  {eleid:9,top:310,name:"百度糯米团",link:"http://m.dianying.baidu.com/activity/5zhounian/general?planId=p41"},
  {eleid:10,top:900,name:"海尔商城",link:"http://m.ehaier.com/mobile/coupon/getCoupons.html?couponsId=3777"}
  ]
$.fn.extend({
  mctap:function(func){
    var _this=this
    this.on('touchstart mousedown',function(e){
      tiptimer=new Date();
    }).on('touchend mouseup',function(e){
      if(new Date()-tiptimer<150) {func.bind(this,e)();}
    })
  }
})
var stageH,stageW;
var tiptimer=0
var rate;
var manifest=[];
$(function(){
  stageW=$(window).width();
  stageH=$(window).height();
  $(".wrap").height(stageH);
  if(isAndroid){
    $('body').addClass("Android");
  }
  rate=stageW/1800;
  manifest=["img/a00.jpg"]
  for(var i=0;i<=82;i++){
    var _i=i<10?("0"+i):i;
    if(i<=1){
      manifest.push("img/a"+_i+".jpg");
    }
    manifest.push("img/a"+_i+".png");
  }
  loadResources(manifest,function (n, i, img) {
    $("#loading p").html("loading&nbsp;" + Math.round(i * 100 / n) + "%");
    if (n != i) return;
    $("#loading").remove();
    $("#wrap").show();
     $("img").each(function(){
      var datasrc=$(this).data("src");
      if(datasrc){
        $(this).attr("src",datasrc);
      }
    })
    init();
  })
})
function init(){
  $(".wrap").show();
  $("#island").smartZoom({
    'maxScale' : 1,
    'dblClickEnabled':false,
    'dblTapEnabled':false,
    'containerClass':'wrap'
  });
  $(".p-maskinner").css({
    height:stageH/rate,
    top:(2093-stageH/rate)/2
  })
  for(var i=0;i<arr.length;i++){
    $(".p"+arr[i].eleid).mctap(function(e){
      $(".p-mask").show();
      $(".t"+$(this).data('id')).show();
      var _id=$(this).data('id');
      var sca=parseFloat(($(".island").css("transform")||$(".island").css("-webkit-transform")).match(/[\d\.]*,/i)[0]);
      $("#island").smartZoom("pan",320-$(".t"+_id).offset().left-$(".t"+_id).width()*sca/2,stageH/2-$(".t"+_id).offset().top-$(".t"+_id).height()*sca*2/3,100);
      _hmt.push(['_trackEvent', 'brand', $(this).data('id')]);
    });

    $(".t"+arr[i].eleid).css({top:arr[i].top-(2093-stageH/rate)/2}).each(function(){
      var _n=$(this).index();
      $(this).find(".tiplink").mctap(function(e){
        window.location.href=arr[_n].link;
        _hmt.push(['_trackEvent', 'linkOut', _n]);
      })
    });
  }
  $(".tipclose").mctap(function(){
    $(".tip,.p-mask").hide();
  })
  $(".p0-subtit").mctap(function(){
    $(".p0").addClass("animOut");
    setTimeout(function(){
      $(".p0").remove();
      $(".islandcont,.whale,.islandbody").show();
      $(".island").addClass("islandIn");
      var centerH=(stageH-rate*2093)/2+rate*1750
      $("#island").smartZoom("zoom", .75,{x:480,y:centerH},3000);
      window.location.hash='p2';
      $(".p-maskouter,.t0").show();
      setTimeout(function(){
        $(".p-maskouter").addClass("animOut");;
        setTimeout(function(){$(".p-maskouter").remove()},420);
      },6000);
    }, 1200);
  })
  $(".p-mask").on('touchmove mousemove',function(e){
    e.preventDefault()
     e.stopPropagation();
  })
  if(window.location.hash){
    $(".p0").hide();
    $(".p0").remove();
    $(".islandcont,.whale,.islandbody").addClass("notrs").show();
    //$(".island").addClass("notrs");
    $(".island").addClass("islandIn2");
    $("#island").smartZoom("zoom", .2,{x:320,y:stageH*1/3},0);
    window.location.hash='p2';
  }

}
function loadResources(urls, progress) {
  var loadedCount = 0;
  var loaded = function () {
    ++loadedCount;
    if (progress) progress(urls.length, loadedCount, this);
  };
  for (var i = 0; i < urls.length; ++i) {
    if (!urls[i]) {
      loaded();
      return;
    }
    var img = new Image();
    img.onload = loaded;
    img.onabort = loaded;
    img.onerror = loaded;
    img.src =  urls[i];
  }
}
</script> 
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?ca1027ad321a6a70bd70243c2e0d6888";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script></body>
</html>