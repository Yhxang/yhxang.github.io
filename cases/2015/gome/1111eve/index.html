<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>11.11前夜发生了什么</title>
<script>
var phoneWidth =  parseInt(window.screen.width);
var phoneScale = phoneWidth/640;
var ua = navigator.userAgent;
if (/Android (\d+\.\d+)/.test(ua)){
  var version = parseFloat(RegExp.$1);
  if(version>2.3){
    document.write('<meta name="viewport" content="width=640, minimum-scale = '+phoneScale+', maximum-scale = '+phoneScale+', target-densitydpi=device-dpi">');
  }else{
    document.write('<meta name="viewport" content="width=640, target-densitydpi=device-dpi">');
  }
} else {
  document.write('<meta name="viewport" content="width=640, user-scalable=no, target-densitydpi=device-dpi">');
}
</script>
<link href="css/swiper.min.css" rel="stylesheet">
<link href="css/style.css?ver=1.01" rel="stylesheet">
</head>
<body>
<img src="img/icon.jpg" alt="" class="shareicon">
<div id="loading">
  <div class="spinner">
    <div class="bounce1"></div>
    <div class="bounce2"></div>
    <div class="bounce3"></div>
  </div>
  <p>loading...</p>
</div>
<div class="wrap">
  <div class="swiper-container">
    <div class="swiper-wrapper">
      <div class="p-starbg">
        <img data-src="img/a16.png" width="640" height="2774" alt="">
        <img data-src="img/a16.png" width="640" height="2774" alt="" class="p-starbgL">
      </div>
      <div class="p-star">
        <i class="p-s1"></i><i class="p-s2"></i><i class="p-s3"></i><i class="p-s4"></i><i class="p-s5"></i><i class="p-s6"></i><i class="p-s7"></i><i class="p-s8"></i><i class="p-s9"></i><i class="p-s10"></i><i class="p-s11"></i><i class="p-s12"></i>
      </div>
      <div class="p0-moon"><img data-src="img/a02.png" width="70" height="70" alt=""></div>

      <div class="swiper-slide p0">
        <img data-src="img/a03.png" width="733" height="304" alt="" class="p0-cloud">
        <img data-src="img/a14.png" width="591" height="144" alt="" class="p0-housetop">
        <div class="p0-tit">
          <img data-src="img/a04.png" width="97" height="88" alt="" class="p0-tit1">
          <img data-src="img/a05.png" width="16" height="17" alt="" class="p0-tit2">
          <img data-src="img/a06.png" width="78" height="77" alt="" class="p0-tit3">
          <img data-src="img/a07.png" width="63" height="66" alt="" class="p0-tit4">
          <img data-src="img/a08.png" width="83" height="78" alt="" class="p0-tit5">
          <img data-src="img/a09.png" width="66" height="68" alt="" class="p0-tit6">
          <img data-src="img/a10.png" width="81" height="76" alt="" class="p0-tit7">
          <img data-src="img/a11.png" width="54" height="67" alt="" class="p0-tit8">
          <img data-src="img/a12.png" width="80" height="81" alt="" class="p0-tit9">
          <img data-src="img/a13.png" width="83" height="92" alt="" class="p0-tit10">

          <div class="p0-sun"><img data-src="img/a01.png" width="20" height="16" alt="" class="p0-circle"> <img data-src="img/a17.png" width="33" height="33" alt="" class="p0-sunshine"></div>
        </div>
        <div class="p0-nexttip"><img src="img/a82.png" width="42" height="15" alt=""><img src="img/a82.png" width="42" height="15" alt=""></div>
      </div>
      <div class="swiper-slide p1">
        <div class="p1-house house">
          <img data-src="img/a01.jpg" width="427" height="172" alt="">
          <div class="p1-role">
            <img data-src="img/a32.png" width="33" height="47" alt="" class="p1-leg">
            <div class="p1-body">
              <img data-src="img/a30.png" width="21" height="22" alt="" class="p1-lhand">
              <img data-src="img/a31.png" width="18" height="22" alt="" class="p1-rhand">
              <img data-src="img/a29.png" width="28" height="37" alt="" class="p1-chest">
            </div>
            <div class="p1-head">
              <img data-src="img/a28.png" width="52" height="46" alt="">
              <div class="p1-leye"></div>
              <div class="p1-reye"></div>
            </div>
          </div>
        </div>
        <img data-src="img/a19.png" width="213" height="163" alt="" class="dialogue">
      </div>

      <div class="swiper-slide p2">
        <div class="p2-house house">
          <img data-src="img/a02.jpg" width="428" height="170" alt="">
          <div class="p2-role">
            <img data-src="img/a35.png" width="13" height="23" alt="" class="p2-leg">
            <img data-src="img/a36.png" width="18" height="17" alt="" class="p2-lhand">
            <img data-src="img/a37.png" width="9" height="20" alt="" class="p2-rhand">
            <img data-src="img/a33.png" width="50" height="100" alt="" class="p2-body">
             <div class="p2-eye">
              <img data-src="img/a38.png" width="15" height="4" alt="">
            </div>
            <img data-src="img/a39.png" width="14" height="7" alt="" class="p2-mouth">
          </div>
          <img data-src="img/a34.png" width="41" height="26" alt="" class="p2-computer">
        </div>
        <img data-src="img/a20.png" width="213" height="163" alt="" class="dialogue">
      </div>

      <div class="swiper-slide p3">
        <div class="p3-house house">
          <img data-src="img/a03.jpg" width="425" height="176" alt="">
          <div class="p3-role">
            <div class="p3-lhand"><img data-src="img/a41.png" width="24" height="27" alt="" class="p3-lhand"></div>
            <div class="p3-rhand"><img data-src="img/a41.png" width="24" height="27" alt="" class="p3-lhand"></div>
            <img data-src="img/a40.png" width="40" height="107" alt="" class="p3-body">
          </div>
        </div>
        <img data-src="img/a83.png" width="213" height="163" alt="" class="dialogue">
      </div>
      <div class="swiper-slide p4">
        <div class="p4-house house">
          <img data-src="img/a04.jpg" width="424" height="172" alt="">
          <div class="p4-role">
            <img data-src="img/a44.png" width="37" height="68" alt="" class="p4-body">
            <img data-src="img/a45.png" width="40" height="46" alt="" class="p4-head">
            <img data-src="img/a42.png" width="11" height="15" alt="" class="p4-music1">
            <img data-src="img/a43.png" width="11" height="9" alt="" class="p4-music2">
          </div>
        </div>
        <img data-src="img/a21.png" width="213" height="163" alt="" class="dialogue">
      </div>
      <div class="swiper-slide p5">
        <div class="p5-house house">
          <img data-src="img/a05.jpg" width="426" width="168" alt="">
          <div class="p5-car">
            <div class="p5-tirel"></div>
            <div class="p5-tirer"></div>
            <img data-src="img/a46.png" width="112" height="73" alt="" class="p5-carbody">
          </div>
          <div class="p5-role1">
            <div class="p5-foot1"></div>
            <img data-src="img/a47.png" width="42" height="114" alt="" class="p5-body1">
            <div class="p5-leye1"></div>
            <div class="p5-reye1"></div>
          </div>
          <div class="p5-role2">
            <img data-src="img/a49.png" width="43" height="114" alt="" class="p5-body2">
            <div class="p5-mouth2"></div>
            <div class="p5-eyebrowl"><i></i></div>
            <div class="p5-eyebrowr"><i></i></div>
          </div>
        </div>
        <img data-src="img/a22.png" width="213" height="163" alt="" class="dialogue">
      </div>
      <div class="swiper-slide p6">
        <div class="p6-house house">
          <img data-src="img/a06.jpg" width="428" height="176" alt="">
          <div class="p6-role">
            <img data-src="img/a53.png" width="47" height="79" alt="" class="p6-body">
            <div class="p6-head">
              <img data-src="img/a52.png" width="33" height="39" alt="">
              <div class="p6-mouth"></div>
            </div>
          </div>
        </div>
        <img data-src="img/a23.png" width="213" height="163" alt="" class="dialogue">
      </div>

      <div class="swiper-slide p7">
        <div class="p7-house house">
          <img data-src="img/a07.jpg" width="429" height="171" alt="">
          <div class="p7-role">
            <img data-src="img/a55.png" width="16" height="27" alt="" class="p7-rhand">
            <img data-src="img/a57.png" width="41" height="111" alt="" class="p7-body">
            <div class="p7-eyebrow"></div>
            <img data-src="img/a34.png" width="41" height="26" alt="" class="p7-computer">
            <img data-src="img/a56.png" width="16" height="27" alt="" class="p7-lhand">
          </div>
        </div>
        <img data-src="img/a24.png" width="213" height="163" alt="" class="dialogue">
      </div>

      <div class="swiper-slide p8">
        <div class="p8-house house">
          <img data-src="img/a08.jpg" width="428" height="171" alt="">
          <div class="p8-role1">
            <img data-src="img/a61.png" width="65" height="37" alt="" class="p8-body1">
            <div class="p8-head1">
              <img data-src="img/a60.png" width="42" height="38" alt="">
              <div class="p8-eyer1"></div>
            </div>
          </div>
          <div class="p8-role2">
            <img data-src="img/a59.png" width="50" height="92" alt="" class="p8-body2">
            <img data-src="img/a58.png" width="42" height="36" alt="" class="p8-head2">
          </div>
        </div>
        <img data-src="img/a25.png" width="274" height="151" alt="" class="dialogue">
      </div>

      <div class="swiper-slide p9">
        <div class="p9-floor"></div>
        <img data-src="img/a62.png" width="347" height="207" alt="" class="p9-door">
        <div class="p9-role1">
          <div class="p9-rhand1"></div>
          <img data-src="img/a64.png" width="42" height="112" alt="" class="p9-body1">
        </div>
        <div class="p-car p9-car1">
          <div class="p-wheelfront"></div>
          <div class="p-wheelback"></div>
          <img data-src="img/a65.png" width="175" height="75" alt="" class="p-carbody">
        </div>
        <div class="p-car p9-car2">
          <div class="p-wheelfront"></div>
          <div class="p-wheelback"></div>
          <img data-src="img/a65.png" width="175" height="75" alt="" class="p-carbody">
        </div>
        <img data-src="img/a66.png" width="45" height="122" alt="" class="p9-role2">
        <img data-src="img/a67.png" width="49" height="131" alt="" class="p9-role3">
        <img data-src="img/a26.png" width="235" height="234" alt="" class="dialogue">
        
      </div>

      <div class="swiper-slide p10">
        
        <img data-src="img/a78.png" width="31" height="89" alt="" class="p10-role3">
        <div class="p-tree p10-tree1"><img data-src="img/a70.png" alt=""></div>
        <div class="p-tree p10-tree2"><img data-src="img/a70.png" alt=""></div>
        <div class="p-tree p10-tree3"><img data-src="img/a70.png" alt=""></div>
        <div class="p-tree p10-tree4"><img data-src="img/a70.png" alt=""></div>
      </div>

      <div class="swiper-slide p11">
        <img data-src="img/a71.png" width="318" height="103" alt="" class="p11-people1">
        <div class="p-car p11-car1">
          <div class="p-wheelfront"></div>
          <div class="p-wheelback"></div>
          <img data-src="img/a65.png" width="175" height="75" alt="" class="p-carbody">
        </div>
        <div class="p-car p11-car2">
          <div class="p-wheelfront"></div>
          <div class="p-wheelback"></div>
          <img data-src="img/a65.png" width="175" height="75" alt="" class="p-carbody">
        </div>
        <div class="p-car p11-car3">
          <div class="p-wheelfront"></div>
          <div class="p-wheelback"></div>
          <img data-src="img/a65.png" width="175" height="75" alt="" class="p-carbody">
        </div>
        <img data-src="img/a72.png" width="319" height="114" alt="" class="p11-people2">
        <img data-src="img/a73.png" width="566" height="133" alt="" class="p11-people3">
        <div class="p-car p11-car4">
          <div class="p-wheelfront"></div>
          <div class="p-wheelback"></div>
          <img data-src="img/a65.png" width="175" height="75" alt="" class="p-carbody">
        </div>
        <div class="p11-role">
          <img data-src="img/a77.png" width="57" height="38" alt="" class="p11-good">
          <img data-src="img/a76.png" width="41" height="73" alt="" class="p11-body">
          <div class="p11-rhand"></div>
          <div class="p11-head">
            <img data-src="img/a74.png" width="31" height="39" alt="">
            <div class="p11-leye"></div>
            <div class="p11-reye"></div>
          </div>
        </div>
        <img data-src="img/a27.png" width="213" height="178" alt="" class="dialogue">
      </div>

      <div class="swiper-slide p12">
        <img data-src="img/a79.png" width="550" height="138" alt="" class="p12-tit">
        <a href="production.html" target="_self" class="p12-btn"><img data-src="img/a80.png" width="325" height="70" alt=""></a>
        <!-- <img data-src="img/a81.png" width="318" height="139" alt="" class="p12-btm"> -->
      </div>
    </div>
  </div>
</div>
<script src="js/zepto.min.js"></script>
<script src="js/swiper.min.js"></script>
<script>
document.body.addEventListener('touchmove', function(e) {
  e.stopPropagation();
  e.preventDefault();
});
var mySwiper;
var oldtrfY=0;
var manifest=[];
for(var i=1;i<=18;i++){
  var _i=i<10?("0"+i):i;
  if(i<=5){
    manifest.push("img/a"+_i+".jpg");
  }
  manifest.push("img/a"+_i+".png");
}
$(function(){
  var stageH=$(window).height();
  $(".wrap").height(stageH);
  loadResources(manifest,function (n, i, img) {
    $("#loading p").html("loading&nbsp;" + Math.round(i * 100 / n) + "%");
    if (n != i) return;
    $("#loading").remove();
    $(".wrap").show();
    $("img").each(function(){
      var datasrc=$(this).data("src");
      if(datasrc){
        $(this).attr("src",datasrc+"?ver=1");
      }
    })
    mySwiper = new Swiper ('.swiper-container', {
      direction: 'vertical',
      slideActiveClass:'curslide',
      slideVisibleClass : 'vsbslide',
      slidesPerView : 'auto',
      watchSlidesProgress: true,
      watchSlidesVisibility: true,
      freeMode: true,
      freeModeMomentumRatio:0,
      onTouchEnd:function(swiper){
        var _first=$(".vsbslide").first();
        var _last=$(".vsbslide").last();
        $(".swiper-slide").removeClass("animIn");
        $(".vsbslide").addClass("animIn");
        $(".newAnmi").removeClass("newAnmi");
        if(_first.offset().top>0){
          _first.addClass("animIn");
        }else{
          if(swiper.translate>oldtrfY){
            _first.removeClass("animIn");
          }
        }
        if(_last.offset().top<stageH-_last.height()*4/5){
          _last.addClass("animIn");
        }else{
          if(swiper.translate<oldtrfY){
            _last.removeClass("animIn");
          }
        }
        if(swiper.translate>oldtrfY){
          $(".animIn").first().addClass("newAnmi");
        }else{
          $(".animIn").last().addClass("newAnmi");
        }
        oldtrfY=swiper.translate;
        if($(".p4,.p7").hasClass("newAnmi")){
          playSnd("click");
          playSnd2();
        }
        if($(".p1,.p5,.p8").hasClass("newAnmi")){
          playSnd("dingdong");
          playSnd2();
        }
        if($(".p2,.p3,.p6").hasClass("newAnmi")){
          playSnd("keyboard");
          playSnd2();
        }
        if($(".p9,.p10").hasClass("newAnmi")){
          playSnd("engine");
          stopSnd2();
        }
        if($(".p11,.p12").hasClass("newAnmi")){
          playSnd("car",.5);
        }
      }
    });

    mySwiper.lockSwipes();

    playSnd2();
    setTimeout(function(){
      mySwiper.unlockSwipes();
      $(".p0-nexttip").show();
      setTimeout(function(){
        $(".p1").addClass("animIn");
        setTimeout(function(){
          $(".p2").addClass("animIn");
        },500);
      },800);
    },3000);

  });
})
function loadResources(urls, progress) {
  var loadedCount = 0;
  var loaded = function () {
    ++loadedCount;
    if (progress) progress(urls.length, loadedCount, this);
  };
  for (var i = 0; i < urls.length; ++i) {
    if (!urls[i]) {
      loaded();
      return;
    }
    var img = new Image();
    img.onload = loaded;
    img.onabort = loaded;
    img.onerror = loaded;
    img.src =  urls[i];
  }
}
var bgm=new Audio();
var bgm2=new Audio();
var sndname="";
var snd2playing=false;
function playSnd(_sndname,vol,isloop){
  if(sndname!=_sndname){
    sndname=_sndname;
    bgm.pause();
    bgm.autoplay=true;
    bgm.preload=true;
    bgm.volume=typeof vol=="undefined"?1:vol;
    bgm.loop=typeof isloop=="undefined"?false:true;
    bgm.src='media/'+sndname+'.mp3';
    bgm.play();
  }
}
function stopSnd(){
  sndname="";
  bgm.pause();
}
function playSnd2(){
  if(!snd2playing){
    bgm2.pause();
    bgm2.autoplay=true;
    bgm2.preload=true;
    bgm2.loop=true;
    bgm2.volume=.5;
    bgm2.src='media/'+'ququ'+'.mp3';
    bgm2.play();
    snd2playing=true;
  }
}
function stopSnd2(){
  bgm2.pause();
  snd2playing=false;
}
</script>

</body>
</html>